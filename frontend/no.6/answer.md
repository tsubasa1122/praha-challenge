# 課題 1

**cleanup が必要な理由**

- 何らかの外部のデータソースへの購読をセットアップしたいことがある場合、メモリリークが発生しないように不要なリソースを解放するクリーンアップ処理が必要になる(具体例は以下)

  - イベントリスナーの解除
  - タイマー処理のキャンセル
  - DB アクセス後の接続解放
    - データをフェッチして promise が解決する前にコンポーネントがアンマウントされた際のキャンセル処理
      - ネットで検索すると 2 通りある [clean-up 関数を理解する](https://www.chotto.dev/ja-JP/clean-up)
      - boolean 値を使った方法
        - true の時だけ、API から取得したデータを setState する(データ取得自体は行う)
      - AbortController を使った方法
        - API リクエストをキャンセルする(ユーザーにとっては無駄なリクエストが無くなるので、エコ)

- POST などでデータの登録を行うだけの場合はクリーンアップ処理は必要ない

### メモ

- axios の API キャンセル処理は後で試してみる
  - https://axios-http.com/docs/cancellation
- API のクリーンアップ処理はあんまりコード見ないけど、みんなどうしているんだろう？
  - そもそもデータ一覧表示などがほとんどで、データを取得中にコンポーネントをアンマウントするユースケースがないから問題が起きてないだけ？

参考:
https://morioh.com/p/83538caf83ba

**useEffect の挙動について**

- 何も指定しなかった場合

  - コンポーネントがレンダリングされる度に実行される
    - 無限ループに陥る恐れがあるので注意が必要

- 空の配列（[]）を指定した場合
  - 初回のレンダリング時のみ実行される

# 課題 2

こちらのプロジェクトを codesandbox 上で fork して、SomeComponent（自身がレンダリングされた回数を表示するコンポーネント）を完成させてください
ヒント：コンポーネントの中に count などのカウンターを持ち、useEffect でレンダリングの度にカウンターを加算すると良いでしょう
ヒント：カウンターを useState で作成してレンダリングの度に useEffect から更新するようにすると、無限ループになってしまうでしょう。なぜでしょうか？解決するには「useRef」が役立つかもしれません！
上記のコンポーネントを更に改善して「someFlag が true になった時だけ加算する」ようにしてみましょう
ボタンを押しても 2 回に 1 回しか加算されなくなったら成功です

# 課題 3

先ほどのプロジェクトに含まれていた FetchComponent を完成させてください
FetchComponent の中で GitHub の API と通信して、特定のレポジトリのスター数を描画してみましょう
このレポジトリの star 数を取得して表示するコンポーネントを作成してください
ただし再レンダリングの度に API との通信が発生しないように気をつけましょう！初回表示の時に一度だけ通信が発生するようにしてください
ヒント：codesandbox だと開発者コンソールの network タブが正しく動かないことがあるようなので、console.log で確認する程度で問題ありません
ヒント：https://api.github.com/repos/facebook/reactを呼び出してみましょう！fetchを使うと良いかもしれません
ヒント：再レンダリングの度にリクエストが飛ばないようにするためには、useEffect の第 2 引数に何かを指定する必要があるはずです！

# 課題 4

useEffect に関するクイズを作成してください
