# 課題１

**SSR, CSR, SSG の違い**

- SSR(サーバーサイドレンダリング)

  - サーバー側でデータを処理して生成した HTML をブラウザにレンダリングする方法
    - 古き良き Web サービスは大体この方法
  - レンダリングのタイミング
    - 毎回クライアントが欲しいページの HTML をサーバー側でレンダリングする
    - CSR に比べて、初回ロードのタイミングでページ全体のデータを読み込む必要がないため、時間は早くなる
  - データ取得のタイミング
    - リクエスト毎にサーバー側で処理し、HTML をレンダリングする
      - CSR に比べるとリクエストする度に HTML をサーバー側でレンダリングしている分、遅くなる
        - CSR は仮想 DOM が差分更新をしてくれるから早くなる？あとは JSON でデータをやりとりするのでネットワークの効率が良くなって早くなる？
    - 同期的な処理になるため、ページ遷移の際は他の動作を行うことができない
  - SEO
    - 問題なくクローラーがコンテンツを認識してくれる

- CSR(クライアントサイドレンダリング)

  - JavaScript によって、ブラウザにレンダリングする方法
  - ページ遷移する(ネットワークを通じて、ページを取得する)ことなくページ全体を書き換えることができるので、インタラクションが高速になる
  - レンダリングのタイミング
    - 初回のデータ取得時に、ページ全体を描画する JavaScript を読み込む
    - 初回のロードが遅くなりがちだが、その後のインタラクションは高速
  - データ取得のタイミング
    - `XMLHttpRequest`オブジェクトを使って非同期でサーバーと通信するため、ページが読み込まれるまで何も動かせないなどのブロッキングが起こらない
  - SEO
    - 昔のクローラーではコンテンツを取得できないので SEO 的に不利だと言われていたが、今はレンダリングまで待ってくれるみたい(Google クローラー)
      - https://speakerdeck.com/yosuke_furukawa/xing-neng-niguan-surukao-efang?slide=16
      - https://developers.google.com/search/docs/advanced/javascript/javascript-seo-basics?hl=ja
        - CSR は基本的に body のタグを書き換えるイメージが強いので、<head>タグ meta 周りの設定を書き換える処理を忘れずに行うよう注意する必要がある
      - 昔は HTML が空だと認識されてうまくコンテンツをインデックスしてくれなかった

- SSG(静的サイトジェネレーション)

  - ビルド時に HTML を構築しておき(外部 API からのデータフェッチも行う)、クライアントからのリクエスト時には事前に構築された HTML を返却してブラウザにレンダリングする方法
    - リクエストの度に HTML を生成する処理が発生しない(CSR はクライアント側・SSR はサーバー側で毎回 HTML を生成する処理が発生する)ので、CDN などにキャッシュしておくことで、高速にページを表示することができる
  - レンダリングのタイミング
    - 毎回クライアントが欲しいページの HTML をサーバー側で生成して、ブラウザにレンダリングする
    - CSR に比べて、初回ロードのタイミングでページ全体のデータを読み込む必要がないため、時間は早くなる
  - データ取得のタイミング
    - リクエスト毎にサーバー側で処理し、HTML を生成する
      - CSR に比べるとリクエストする度に HTML をサーバー側で生成している分、遅くなる
    - 同期的な処理になるため、ページ遷移の際は他の動作を行うことができない
  - SEO
    - SSR 同様問題なくクローラーが認識してくれる
    - コンテンツのレスポンスが早くなる分、ユーザー体験が向上し、SEO の評価が高くなる
      - ユーザー体験が良いと SEO 評価も上がる
      - https://developers-jp.googleblog.com/2021/05/core-web-vitals.html

### メモ

- Rails 7 で新しく導入された`Hotwire`が面白い
  - https://zenn.dev/en30/articles/2e8e0c55c128e0

参考:  
https://zenn.dev/akino/articles/78479998efef55

# 課題 2

ここからは SSR と SSG 毎にデータの取得方法を変えてみましょう
SSR
上記ページ（Welcome to Next.js と表示されているページ）をコピーして、別の URL パスでアクセスできるようにしておきましょう（pages/ssr.js など）
リクエスト毎にサーバ側でスター数を取得してから表示するように改修してみましょう（SSR）
ヒント：getServerSideProps を使うと良いかもしれません
SSG
上記ページ（Welcome to Next.js と表示されているページ）をコピーして、別の URL パスでアクセスできるようにしておきましょう（pages/ssg.js など）
ビルドのタイミングでスター数を取得するようにしてみましょう
ヒント：getStaticProps を使うと良いかもしれません
上記アプリケーション（ssr.js と ssg.js が page 配下に配置されている状態）をビルドしてください
page 配下の ssr と ssg はページの中身はほとんど一緒ですが、それぞれビルド後の成果物に差分が生じているはずです。どのような違いが生じているか、ペアに説明してください
ヒント：next.js でビルドした成果物はデフォルト設定なら.next ディレクトリ配下に配置されます
ヒント：.next/server/pages 配下を見てみると良いかもしれません！
ヒント：ssg.html は存在しますが ssr.html は存在しないはずです。何故でしょう？

# 課題 3

以下のようなケースで SSR、SSG、CSR のうちどれを採用するべきか、ペアに説明してみてください
週 1 回更新されるブログ
ユーザーのコメントが随時追加されるクックパッドのようなサービス
freee のような会計サービス
経営指標（OKR や KPI など）を管理する社内サービス
社内 SNS
