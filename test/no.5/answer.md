## 課題１（質問）

### テスト駆動開発のメリットと、デメリットを挙げてください

テスト駆動開発は「動作する綺麗なコード」を作るため方法です。動作するコードを動作するまま、コードを綺麗にしていく。

- メリット

  - バグを早期に発見出来る。
    - モジュールやユニット毎にテストを行うため、バグがある場合はその場で発見することが出来、デバッグに要する時間も減る。最初にテストケースをしっかりと考えるので、レアケースや仕様の漏れを事前に防ぐことが出来る。
  - 要件や仕様を理解しやすくなる。
    - テストコードを書くためには、要件を細分化し、理解しなければならないため、はじめにテストコードを書くことで仕様の理解も早まります。
  - 開発の心理的負担が軽減される。
    - 追加のコーディングやリファクタリングを行うたびにリグレッションテストを行えます。異常がないことを確認しながら作業出来るため、開発者の心理的負担が軽減します。
  - 開発の工数予測の精度を向上させる。
    - 事前に実装すべき要件を洗い出して、ToDo リスト化するため、プロダクトが完成したかどうかが分かり、不具合も減るため、開発工数の予測に寄与します。

- デメリット

  - 慣れるのに時間が掛かる。
    - 初期段階でテストコードを書くのは大変です。意図した通りのテストコードを作るには、ある程度の経験が求められます。
  - テストコードの実装・保守に時間が掛かる。
    - デメリットなのか？は微妙ですが、テストを書く分の実装工数や保守の時間が掛かります。
  - 新規事業などで、アプリケーションの入れ替わりが激しいタイミングで導入すると、コストが高く感じてしまう。(早く綺麗なコードを書くべきだが、チーム全体で実行するのは大変そう)

参考：
https://it-trend.jp/development_tools/article/32-0036
https://developers.cyberagent.co.jp/blog/archives/11977/

疑問点：

- TDD は単体テストをイメージしているように感じるが、結合テストや E2E テストはどのタイミングで取り入れる感じなのだろうか？
- フロントエンドでは、TDD を入れ辛そうな気がするが、どうしているのだろうか？
- これは疑問点ではないが、DHH は「[TDD は死んだ](https://ubiteku.oinker.me/2015/07/21/tdd-is-dead-long-live-testing/)」と言っており、その理由や思想を調べたら理解が深まりそう？(元に Rails の設計は密結合なフレームワークを採用することで開発速度を上げている。)

### TDD における以下の用語の意味を説明してください

- レッド・グリーン・リファクタリング

  - テスト駆動開発のサイクルを表す単語です。

  ![tdd-cycleスクリーンショット](images/tdd-cycle.png)

  - レッド
    - テストに失敗するコードを書くこと。
    - 必ず失敗するテストコードを書くことで、テストが正しく失敗することを確認します。
  - グリーン
    - テストに成功するコードを書くこと。
    - テストをパスすることが出来る最小限のコードを書きます。(あくまでも、要件を満たしたコードが正しくテストをパス出来るかを確認します。)
  - リファクタリング
    - 読みやすいコードへ改善すること。
    - レッド・グリーンを経ても、まだコードは役立つ状態ではないので、テストをパス出来る状態を維持し、拡張性や保守性を改善します。

- 仮実装

  - 意図的に「歩幅を小さく」し、テストを通すための最小限の変更を行うこと。
    - テストの正当性を検証するため。
    - テストから最短距離でフィードバックを得るため。

- 三点測量

  - 「仮実装」をしていると、たまたまテストが通ってしまうことになるため、別のテストを追加することにより、実装の正しさを確認する戦略のこと。
    - これを行うことにより、本実装(実際の目的を達成する実装)を導き出す。

参考：
https://s4na.hatenablog.com/entry/2019/08/08/153533
https://kakakakakku.hatenablog.com/entry/2019/09/24/085131
https://qiita.com/takagi-shun/items/a7465ccaffbf6108e1b6
https://www.slideshare.net/setoazusa/tddbc-tokyo-201709-80306703

メモ:
AtCoder の題材を TDD でやるのは良さそう
https://panda-program.com/posts/test-driven-development

## 課題２（実装）

```
$ cd tdd-app
$ yarn
$ yarn test
```
=======
## 課題 2（質問）

### E2E テストのメリットとデメリットを挙げてください

- メリット

  - 実際のアプリケーションの稼働に近い動きをテストすることが出来る。
  - 表示されているボタンをクリックすることや表示されている文言の確認など、細かい挙動をテストすることが出来る。

- デメリット

  - 実際にサーバーやブラウザを起動するため、単体テストに比べて実行時間が掛かる。
  - 細かい挙動をテスト出来る分、目的を考えてテストを行わないと開発のアジリティが下がる。(テスト実行に時間が掛かる -> 簡単な変更でテストが落ちるのループは辛い)
  - 影響範囲が大きのでテストが不安定になりやすい。

参考：
https://qiita.com/NAKKA-K/items/58d6b8476a3717179bda
https://qiita.com/mt0m/items/7e18d8802843d9f60d28

### テスト手法（単体、統合、E2E など）を選択する際、どのような基準で選ぶと良いでしょうか？例えば「A という基準で見たら単体＞統合＞ E2E だけど、B という基準で見たら E2E ＞単体＞統合」のように、基準ごとにテスト手法の優劣が決まるような基準をいくつか持っておくと良いでしょう！

前提として、今までの課題をそれぞれ分類すると以下ののようになりそう？

- 単体テスト
  - 単体テストを書こうでテストした内容
  - スナップショットテスト(※単体のコンポーネントをある切り口でテストしたと考えると単体テストだと思った)
  - ビジュアルリグレッションテスト(※単体のコンポーネントをある切り口でテストしたと考えると単体テストだと思った)
- 結合テスト
  - 単体テストを書こうでテストした内容で依存していたオブジェクトをモック化せずに行った場合、結合テストになる。(コントローラーをテストするイメージ)
- E2E
  - 今回の E2E テスト

導入しやすさやメンテナンス性、運用コストの観点だと以下
単体 ＞ 統合 ＞ E2E

アプリケーションの品質を高める(厳密に動作テストしたい箇所に使うなど)、変更があまりない箇所加える(リグレッションテストを自動化出来たら工数がかなり下がるため)
E2E ＞ 統合 ＞ 単体

参考：
https://qiita.com/wafuwafu13/items/a0428c1451f7e8221334
https://tech.studyplus.co.jp/entry/2020/10/05/090000
https://qiita.com/wataryooou/items/f0e6463aa9e0168865c4

## 課題３（クイズ）

No.1: cypress の integration テストを`__tests__`配下で行いたい時、cypress.json にはどのような設定を行えばいいでしょうか？

No.2: cypress でクロスブラウザテストを行いたい場合、どのような設定を行えばいいでしょうか？firefox でテストを行いたい場合の設定を教えてください。

No.3: cypress で環境変数を設定する方法をふたつ教えてください。
